#+PROPERTY: LOGGING nil

#+BEGIN_HTML
<a href=https://alphapapa.github.io/dont-tread-on-emacs/><img src="dont-tread-on-emacs-150.png" align="right"></a>
#+END_HTML

* org-super-agenda

This package lets you "supercharge" your Org daily/weekly agenda.  The idea is to group items into sections, rather than having them all in one big list.

Now you can sort-of do this already with custom agenda commands, but when you do that, you lose the daily/weekly aspect of the agenda: items are no longer shown based on deadline/scheduled timestamps, but are shown no-matter-what.

So this ~org-super-agenda~ command essentially copies the ~org-agenda-list~ command, but right before it inserts the agenda items, it runs them through a set of user-defined filters that separate them into sections.  Then the sections are inserted into the agenda buffer, and any remaining items are inserted at the end.  Empty sections are not displayed.

The end result is your standard daily/weekly agenda, but arranged into sections defined by you.  You might put items with certain tags in one section, habits in another section, items with certain todo keywords in another, and items with certain priorities in another.  The possibilities are only limited by the filter functions (which you can easily add to, and more will be added here).

Here's what a normal agenda looks like:

[[screenshot-before.png]]

Here's what the "super" agenda looks like:

[[screenshot-after.png]]

** Usage

Here's the code for the example above.  The ~org-super-agenda~ command works as a custom agenda command, so you can add it to your ~org-agenda-custom-commands~ list.  You can also test it quickly like this:

#+BEGIN_SRC elisp
  (let ((org-agenda-custom-commands
         '(("u" "SUPER Agenda"
            org-super-agenda ""
            ((org-agenda-span 'day)
             (org-agenda-groups '(;; Each group has an implicit boolean OR operator between its selectors.
                                  (:name "Today"  ; Optionally specify section name
                                         :time t  ; Items that have a time associated
                                         :todo "TODAY")  ; Items that have this TODO keyword
                                  (:name "Important"
                                         ;; Single arguments given alone
                                         :any-tags "bills"
                                         :priority "A")
                                  (:name "Food-related"
                                         ;; Multiple args given in list
                                         :any-tags ("food" "dinner"))
                                  (:name "Personal"
                                         :habit t
                                         :any-tags "personal")
                                  ;; Filter functions supply their own section names when none are given
                                  (:todo "WAITING")
                                  (:todo ("SOMEDAY" "TO-READ" "CHECK" "TO-WATCH" "WATCHING")
                                         ;; Show this section at the end of the agenda. If you specified
                                         ;; this filter last, items with these todo keywords that have
                                         ;; priority A, B, or C would be displayed in those sections
                                         ;; instead, because items are filtered out in the order the
                                         ;; filters are listed.
                                         :last t)
                                  (:priority ("B" "C")))))))))
    (org-agenda nil "u"))
#+END_SRC

** Installation

This package will eventually be submitted to MELPA, and hopefully upstreamed into Org in some fashion.  In the meantime, install it like this:

1.  Install the =s= package from MELPA.
2.  Put the file =org-super-agenda.el= in your =load-path= directory.
3.  Add to your init file: ~(use-package org-super-agenda)~.
4.  Add a new custom command to =org-agenda-custom-commands= that calls =org-super-agenda=.  Use the example code above as a guideline.
5.  Start the day with confidence, knowing that nothing important has been lost in the jumble of /ahem/ overdue items.

** Development

Contributions and feedback are welcome.

** License

GPLv3+
